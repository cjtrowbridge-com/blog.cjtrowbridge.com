---
id: 14861
title: 'My New NAS Architecture: DIY Synology Running RAID 51'
date: '2023-09-24T17:46:20-07:00'
author: cjtrowbridge
layout: post
guid: 'https://blog.cjtrowbridge.com/?p=14861'
permalink: /2023/09/24/my-new-nas-architecture-diy-synology-running-raid-51/
categories:
    - Featured
    - Projects
---

I have outgrown my two DS218+ Synology NAS boxes. These have served me well for longer than I can remember. I use these to store backups from all my servers and devices, as well as my media library and all my documents and projects. I have had these Synology boxes set up as a main NAS and a live mirror with version tracking. I also striped the WD Red Pro NAS drives to run as RAID 0, so they work a lot faster together than they would on their own. I originally used Bittorrent Sync and then later Syncthing to mirror the contents of the main NAS to the mirror NAS. This software not only copies everything over in real time, but it also tracks changes and saves old versions of all the files in case there is some malicious or accidental change that harms the data. All my other devices and web servers either mirror themselves to the main NAS in real time or else send their backups once a day. It looks like this; [![Old NAS Architecture](https://blog.cjtrowbridge.com/wp-content/uploads/2023/09/old-nas-architecture.fw_-2-1-1-1.png)](https://blog.cjtrowbridge.com/wp-content/uploads/2023/09/old-nas-architecture.fw_-2-1-1-1.png)You may wonder why I'm not going with RAID 10. The industry standard for storage on mechanical drives is RAID 10. RAID 10 looks like this; ![raid 10](https://blog.cjtrowbridge.com/wp-content/uploads/2023/09/raid-10-1-1.jpg)There are advantages and drawbacks to this architecture. The main advantage is redundancy. You can lose up to half the drives and the array will keep working. Swap out a dead drive and the array will reconstruct it from the other drives in the array. RAID 10 is in effect both striped and mirrored, so you get faster read speeds than simply mirroring the drives, and you get the redundancy of having a second copy of everything. I decided to reverse the architecture to RAID 01 instead of RAID 10. This allows additional software and hardware redundancy while maintaining the overall architecture and retaining all the benefits of RAID10. RAID 01 looks like this; ![RAID 01](https://blog.cjtrowbridge.com/wp-content/uploads/2023/09/raid-01-1-1.webp)I am a lot more worried about a software problem than a hardware problem. WD Red Pro drives have less than a 1% annual failure risk; these drives are solid. Striping two on each NAS means they are both solid and fast. Mirroring the entire NAS means I achieve the same redundancy as RAID 10 but with the additional protection of version tracking and incremental backups on the mirror NAS which RAID 10 does not have. Imagine a cryptolocker attack or a filesystem corruption or even just somehow accidentally deleting everything. If I was using RAID 10, everything would be gone. Going with RAID 01 means I have all the same pros of RAID10 but without these risks. The one thing I am missing is local rebuild for a failed drive, but that is part of the reason for this project and it will be addressed in the next stage. Here is the new architecture; [![New NAS Architecture](https://blog.cjtrowbridge.com/wp-content/uploads/2023/09/new-nas-architecture.fw_-2-1-1-1.png)](https://blog.cjtrowbridge.com/wp-content/uploads/2023/09/new-nas-architecture.fw_-2-1-1-1.png)The only difference is that I've moved both drive arrays into a set of R230 PowerEdge servers. These actually cost less than the DS218+ machines did, and they have an incredible amount of additional power and capacity. I initially was looking at Synology rackmount servers, but their specs are very limited while their cost is extremely high compared to something like an R310. The main advantage of the R310 is that it has four 3.5" drive bays. This means I can expand my striped RAID 0 arrays to RAID 5 arrays. That way, if any drive fails, I can drop in a replacement and it will rebuild itself, rather than having to rebuild the entire local array. Here is what that will look like; [![Future NAS Architecture](https://blog.cjtrowbridge.com/wp-content/uploads/2023/09/future-nas-architecture.fw_-2-1-1-1.png)](https://blog.cjtrowbridge.com/wp-content/uploads/2023/09/future-nas-architecture.fw_-2-1-1-1.png)This architecture will cost a lot less than my current setup, and it will feature all the pros of RAID 10 at a fraction of the cost, plus the added benefit of protection from software and filesystem problems which aren't addressed by RAID 10. You may be asking what I'm doing with the fourth drive bay on these servers. I will be using WD Blue SSDs in order to install the Synology operating system and also run docker, plex, and other software.